#!/usr/bin/env node

var scriptsP = require('../index');

var npm_script_names = process.argv.slice(2);

if(npm_script_names.length === 0){
  console.log('USAGE: scriptsp [script1] [script2] ...');
  console.log('i.e.');
  console.log('  $ scriptsp start test watch-js');
  process.exit(0);
}

var errorOut = function(msg){
  console.error('[error]', msg);
  process.exit(1);
};

try{
  var package_json = require(process.cwd() + '/package.json');
}catch(e){
  errorOut('must be run in the same working directory as your package.json');
}
var scripts = (package_json && package_json.scripts) || {};

npm_script_names.forEach(function(script){
  if(!scripts.hasOwnProperty(script)){
    errorOut('"' + script + '" not found in package.json scripts');
  }
});

scriptsP(npm_script_names);
